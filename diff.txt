diff --git a/basemap_style/lines b/basemap_style/lines
index b20440d..bf11ba0 100644
--- a/basemap_style/lines
+++ b/basemap_style/lines
@@ -14,7 +14,6 @@ include '../inc/exit_dest' ;
 include '../inc/lines';
 include '../inc/non_motorcar_ways_lines';
 include '../inc/track_path_lines';
-include '../inc/unknown_ways_lines';
 
 # rendering options of nonroutable ways
 include '../inc/boundary_lines' ;
@@ -22,5 +21,8 @@ include '../inc/non_route_ways_lines' ;
 include '../inc/water_lines' ;
 include '../inc/barrier_lines';
 
+# possible routable ways 
+include '../inc/unknown_ways_lines';
+
 # last line is the finalize section!
 include '../inc/finalize_lines';
diff --git a/bikemap_style/lines b/bikemap_style/lines
index 8e227f4..b5de7e5 100644
--- a/bikemap_style/lines
+++ b/bikemap_style/lines
@@ -14,7 +14,6 @@ include '../inc/exit_dest' ;
 include '../inc/lines';
 include '../inc/non_motorcar_ways_lines';
 include '../inc/track_path_lines';
-include '../inc/unknown_ways_lines';
 
 # rendering options of nonroutable ways
 include '../inc/boundary_lines' ;
@@ -22,5 +21,8 @@ include '../inc/non_route_ways_lines' ;
 include '../inc/water_lines' ;
 include '../inc/barrier_lines';
 
+# possible routable ways 
+include '../inc/unknown_ways_lines' ;
+
 # last line is the finalize section!
 include '../inc/finalize_lines';
diff --git a/bikeroute_style/lines b/bikeroute_style/lines
index 6996f7e..08bff00 100644
--- a/bikeroute_style/lines
+++ b/bikeroute_style/lines
@@ -45,7 +45,6 @@ include '../inc/exit_dest' ;
 include '../inc/lines';
 include '../inc/track_path_lines';
 include '../inc/non_motorcar_ways_lines';
-include '../inc/unknown_ways_lines';
 
 # rendering options of nonroutable ways
 include '../inc/boundary_lines' ;
@@ -53,5 +52,8 @@ include '../inc/boundary_lines' ;
 #include '../inc/water_lines' ;
 include '../inc/barrier_lines';
 
+# possible routable ways
+include '../inc/unknown_ways_lines';
+
 # last line is the finalize section!
 include '../inc/finalize_lines';
diff --git a/carmap_style/lines b/carmap_style/lines
index f93529a..79b9076 100644
--- a/carmap_style/lines
+++ b/carmap_style/lines
@@ -14,7 +14,6 @@ include '../inc/exit_dest' ;
 include '../inc/lines';
 #include '../inc/non_motorcar_ways_lines';
 #include '../inc/track_path_lines';
-include '../inc/unknown_ways_lines';
 
 # rendering options of nonroutable ways
 include '../inc/boundary_lines' ;
@@ -22,5 +21,8 @@ include '../inc/non_route_ways_lines' ;
 include '../inc/water_lines' ;
 #include '../inc/barrier_lines';
 
+# possible routable ways
+#include '../inc/unknown_ways_lines';
+
 # last line is the finalize section!
 include '../inc/finalize_lines';
diff --git a/inc/access b/inc/access
index b540de3..edea81d 100644
--- a/inc/access
+++ b/inc/access
@@ -18,6 +18,9 @@ highway=* & motorroad=yes
     highway ~ 'trunk.*' )
         & mkgmap:country=DEU            { add bicycle=no; add foot=no }
 
+highway=bus_guideway 
+        & mkgmap:country=DEU            { add bus=yes; add taxi=yes; addaccess 'no' ; }
+
 # Belgium (BEL)
 
 highway=trunk & mkgmap:country=BEL      { add bicycle=no; add foot=no }
diff --git a/inc/lines b/inc/lines
index 073906f..d412700 100644
--- a/inc/lines
+++ b/inc/lines
@@ -210,6 +210,12 @@ highway=living_street				                   [0x12008 resolution 23-23 continue]
 highway=living_street				                   [0x11008 resolution 24 continue]
 highway=living_street				                   [0x07 resolution 24 road_class=0 road_speed=0]
 
+# runaway truck ramp
+highway=escape						                   [0x11007 resolution 24] 
+
+# bus lanes
+highway=bus_guideway                                   [0x11007 resolution 24]
+
 #------------------------------------------------------------------------------
 # designated ways
 
@@ -228,17 +234,17 @@ highway=pedestrian					                   [0x07 resolution 24 road_class=0 road_
 
 (highway=track & tracktype=grade2) |
       (highway=byway & mkgmap:unpaved=1)               [0x1200f resolution 23 continue]
-highway=track & tracktype=grade2 |
+(highway=track & tracktype=grade2) |
       (highway=byway & mkgmap:unpaved=1)               [0x1100f resolution 24 continue]
 (highway=track & tracktype=grade2) |
-      (highway=byway  & mkgmap:unpaved=1)              [0x0f resolution 24 road_class=0 road_speed=0]
-
-highway=track & tracktype=grade1 |
-      highway=byway                                    [0x1200e resolution 23-22 continue]
-highway=track & tracktype=grade1 |
-      highway=byway                                    [0x1100e resolution 24 continue]
-highway=track & tracktype=grade1 |
-      highway=byway                                    [0x0e resolution 24 road_class=0 road_speed=0]
+      (highway=byway & mkgmap:unpaved=1)               [0x0f resolution 24 road_class=0 road_speed=0]
+
+(highway=track & tracktype=grade1) |
+      (highway=byway & mkgmap:unpaved=0)               [0x1200e resolution 23-22 continue]
+(highway=track & tracktype=grade1) |
+      (highway=byway & mkgmap:unpaved=0)               [0x1100e resolution 24 continue]
+(highway=track & tracktype=grade1) |
+      (highway=byway & mkgmap:unpaved=0)               [0x0e resolution 24 road_class=0 road_speed=0]
 
 #------------------------------------------------------------------------------
 # route
diff --git a/inc/non_route_ways_lines b/inc/non_route_ways_lines
index 9707695..e571614 100644
--- a/inc/non_route_ways_lines
+++ b/inc/non_route_ways_lines
@@ -4,7 +4,11 @@
 #------------------------------------------------------------------------------
 
 highway=raceway                                           [0x12007 resolution 24-23]
-highway=platform                                          [0x10f0d resolution 24]
+
+highway=platform |
+highway=bus_stop |
+highway=tram_stop |
+highway=elevator                                          [0x10f0d resolution 24]
 
 # aeroway
 aeroway=runway                                            [0x27 resolution 20]
@@ -49,7 +53,7 @@ railway=tram |
 railway=subway |
 railway=funicular |
 railway=preserved |
-railway=monorail                                                                        [0x10e0f resolution 24]
+railway=monorail                                           [0x10e0f resolution 24]
 
-railway=turntable | railway=traverser                                                   [0x10106 resolution 24-23]
+railway=turntable | railway=traverser                      [0x10106 resolution 24-23]
  
diff --git a/inc/polygons b/inc/polygons
index db4bcd6..1f88d2b 100755
--- a/inc/polygons
+++ b/inc/polygons
@@ -82,22 +82,22 @@ landuse=commercial 				                [0x0f resolution 18]
 landuse=industrial				                [0x0c resolution 18]
 landuse=retail 					                [0x08 resolution 18]
 
-landuse=landfill                                                [0x10f07 resolution 18]
+landuse=landfill                                [0x10f07 resolution 18]
 
-landuse=conservation                                            [0x10f0a resolution 18]
+landuse=conservation                            [0x10f0a resolution 18]
 
 landuse=brownfield				                [0x0e resolution 20]
 landuse=greenfield				                [0x10 resolution 20]
-landuse=construction                                            [0x11 resolution 20]
+landuse=construction                            [0x11 resolution 20]
 
 landuse=village_green |
 landuse=grass					                [0x10f11 resolution 22]
 
 landuse=allotments 				                [0x10f08 resolution 22]
-landuse=orchard                                                 [0x4e resolution 22]
+landuse=orchard                                 [0x4e resolution 22]
 
 landuse=farmland |
-landuse=plant_nursery                                           [0x2a resolution 21]
+landuse=plant_nursery                           [0x2a resolution 21]
 
 landuse=farmyard 				                [0x2b resolution 22]
 landuse=vineyard 				                [0x2c resolution 22]
@@ -197,4 +197,4 @@ building=* &
   mkgmap:residential!=*                          [0x13 resolution 24]
   
 
-  
\ No newline at end of file
+  
diff --git a/inc/pre_lines b/inc/pre_lines
index 98860a9..218c758 100644
--- a/inc/pre_lines
+++ b/inc/pre_lines
@@ -20,6 +20,9 @@ highway=* & mkgmap:mp_created=true {add area=yes}
 # Hide removed ways
 (highway=razed | 
   highway=dismantled)               {deletealltags}
+  
+#Hide historic ways
+highway=historic                    {deletealltags}
 
 # Hide abandoned ways. Abandoned highways have some evidence of their former 
 # existence but are no longer used. These
@@ -88,7 +91,25 @@ highway=corridor
                   add tunnel=yes;
                   add covered=yes;
                   }
-
+# Flag paved roads
+highway=* & 
+  (surface=asphalt | 
+    surface=paved | 
+    surface=sett | 
+    surface=concrete | 
+    surface=concrete:lanes | 
+    surface=concrete:plates | 
+    surface=paving_stones  | 
+    surface=cobblestone  | 
+   	surface=cobblestone:flattened  | 
+   	surface=metal  | 
+   	surface=wood)               
+      { set mkgmap:unpaved=0 }
+
+highway=* & tracktype=grade1 & surface!=* 
+      { set mkgmap:unpaved=0 }
+
+# Flag unpaved roads
 highway=*
            & (
               surface=cobblestone |
@@ -107,6 +128,7 @@ highway=*
               mtb:scale=* |
               tracktype~'grade[2-6]' |
               smoothness~'.*(bad|horrible|impassable)' |
+              trail_visibility~'.*(bad|horrible|no)' |
               sac_scale~'.*(mountain|alpine)_hiking' |
               sport=via_ferrata
               )
@@ -114,8 +136,8 @@ highway=*
               add mkgmap:unpaved=1;
             }
 
-(highway=bridleway | 
-      highway=trail | 
+(highway=bridleway |
+      highway=trail |
       highway=unsurfaced | 
       highway=byway)
             & surface!=*
@@ -125,7 +147,7 @@ highway=*
             {
               add mkgmap:unpaved=1;
             }
-
+## highway=path are handled in inc/track_path_lines to allow bicycle routing
 
 man_made=pier & area!=yes
               {
@@ -133,6 +155,14 @@ man_made=pier & area!=yes
                 add bicycle=dismount
                 }
 
+## highway=services with amenity=* should use the amenity tag
+(highway=services | highway= rest_area) & 
+    amenity=*                                {delete highway}
+
+## highway=services should have the area tag, to prevent routing errors
+(highway=services | highway= rest_area) &
+    area!=* & is_closed() = true              {add area=yes}
+
 #------------------------------------------------------------------------------
 # Convert some rules
 
@@ -203,12 +233,16 @@ bridge=yes & ( highway=* | railway=* )
              highway=footway |
              highway=cycleway)                                                          [0x10f00 resolution 24 continue]
 
+highway=ramp {set highway=footway}                                                      [0x10f00 resolution 24 continue]
+
 # cutting overlay
 (cutting=yes)
           & (highway=track |
              highway=path |
              highway=footway |
              highway=cycleway)                                                          [0x10f01 resolution 24 continue]
+             
+highway=escalator {set highway=footway;}                                                [0x10f01 resolution 24 continue]
 
 # tram overlay
 highway=* & railway=tram                                                                [0x10e0d resolution 24-23 continue]
@@ -218,5 +252,6 @@ highway=* & horse=designated
 
 # path with bad conditions
 highway=path
-           & smoothness~'.*(bad|horrible|impassable)'                                   [0x10e0c resolution 24 continue]
+           & (smoothness~'.*(bad|horrible|impassable)' |
+             trail_visibility~'.*(bad|horrible|no)' )                                   [0x10e0c resolution 24 continue]
               
diff --git a/inc/track_path_lines b/inc/track_path_lines
index 1e1c888..5090c1b 100644
--- a/inc/track_path_lines
+++ b/inc/track_path_lines
@@ -8,13 +8,10 @@ highway=track & tracktype=grade3
 highway=track & tracktype~'grade[4-6]'                                                  [0x11011 resolution 24 continue]
 highway=track & tracktype~'grade[4-6]'                                                  [0x11 resolution 24 road_class=0 road_speed=0]
 
-highway=track
-                {
-                  add mkgmap:unpaved=1;
-                }
-
 highway=track                                                                           [0x1100b resolution 24 continue]
-highway=track                                                                           [0x11 resolution 24 road_class=0 road_speed=0]
+highway=track  {
+                  add mkgmap:unpaved=1;
+                }                                                                       [0x11 resolution 24 road_class=0 road_speed=0]
 
 #------------------------------------------------------------------------------
 # path
@@ -25,7 +22,6 @@ highway=path & (bicycle=permissive |
                  bicycle=official |
                  bicycle=yes)                                                           [0x0a resolution 24 road_class=0 road_speed=1]
 
-highway=path | highway=trail
-                {
+highway=path   {
                   add mkgmap:unpaved=1;
                 }                                                                       [0x12 resolution 24 road_class=0 road_speed=0]
diff --git a/inc/unknown_ways_lines b/inc/unknown_ways_lines
index 3a41f74..dc4cfd0 100644
--- a/inc/unknown_ways_lines
+++ b/inc/unknown_ways_lines
@@ -3,11 +3,12 @@
 
 # road = way typ not defined/unknown
 # unknown roads = 0x0b(routable) and 0x2c(overlay)
-highway=road                                                                            [0x2c resolution 24 continue]
-highway=road                                                                            [0x0b resolution 24 road_class=0 road_speed=0]
+highway=road                                                            [0x2c resolution 24 continue]
+highway=road                                                            [0x0b resolution 24 road_class=0 road_speed=0]
+
+highway=* & (mkgmap:unpaved=1)                                          [0x0b resolution 24 road_class=0 road_speed=0 continue]
+highway=* & junction=roundabout                                         [0x0c resolution 24 road_class=0 road_speed=0 continue]
+highway=* & (area!=yes & area!=true & area!=1)                          [0x1b resolution 24 road_class=0 road_speed=0]
 
-highway=* & (mkgmap:unpaved=1)                                                          [0x0b resolution 24 road_class=0 road_speed=0]
-highway=* & (area!=yes & area!=true & area!=1)                                          [0x1b resolution 24 road_class=0 road_speed=0]
-highway=* & junction=roundabout                                                         [0x0c resolution 24 road_class=0 road_speed=0]
 
 
